<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scan History - DeepGuard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Space+Grotesk:wght@400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="history.css">
    <link rel="stylesheet" href="animations.css">
</head>

<body class="analysis-page">
    <div class="mesh-background"></div>
    <div id="particles-js"></div>

    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <div class="nav-content">
                <a href="index.html" class="logo">
                    <img src="logo.svg" alt="DeepGuard Logo" class="logo-img">
                    <span class="logo-text">Deep<span class="gradient-text">Guard</span></span>
                </a>
                <ul class="nav-menu" style="margin-left: auto; padding-right: 40px;">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="analysis.html">Analysis</a></li>
                    <li><a href="history.html" class="active">History</a></li>
                </ul>
                <a href="index.html" class="btn-secondary-nav">‚Üê Back to Home</a>
            </div>
        </div>
    </nav>

    <main class="analysis-container">
        <div class="container" style="max-width: 1200px; padding-top: 40px;">
            <div class="section-header">
                <h2 class="section-title">Scan <span class="gradient-text">History</span></h2>
                <p class="section-subtitle">View and manage your past detection results</p>
            </div>

            <!-- Controls Bar -->
            <div class="history-controls">
                <div class="search-container">
                    <input type="text" id="searchInput" class="search-input" placeholder="üîç Search by filename...">
                </div>

                <div class="filter-controls">
                    <select id="filterPrediction" class="filter-select">
                        <option value="all">All Results</option>
                        <option value="FAKE">Fake Only</option>
                        <option value="REAL">Real Only</option>
                    </select>

                    <select id="filterConfidence" class="filter-select">
                        <option value="all">All Confidence</option>
                        <option value="high">High (>80%)</option>
                        <option value="medium">Medium (50-80%)</option>
                        <option value="low">Low (<50%)< /option>
                    </select>

                    <select id="sortBy" class="filter-select">
                        <option value="date-desc">Latest First</option>
                        <option value="date-asc">Oldest First</option>
                        <option value="confidence-desc">Confidence ‚Üì</option>
                        <option value="confidence-asc">Confidence ‚Üë</option>
                        <option value="filename-asc">Filename A-Z</option>
                    </select>
                </div>

                <div class="export-controls">
                    <button class="btn-export" onclick="exportHistory('csv')">
                        üìÑ Export CSV
                    </button>
                    <button class="btn-export" onclick="exportHistory('json')">
                        üìã Export JSON
                    </button>
                    <button class="btn-clear-all" onclick="confirmClearAll()">
                        üóë Clear All
                    </button>
                </div>
            </div>

            <!-- Results Count -->
            <div class="results-count" id="resultsCount">
                Showing <span id="showingCount">0</span> of <span id="totalCount">0</span> results
            </div>

            <!-- History Table -->
            <div class="history-table-container" id="historyTableContainer">
                <table class="history-table" id="historyTable">
                    <thead>
                        <tr>
                            <th>Preview</th>
                            <th onclick="sortTable('filename')">Filename <span class="sort-indicator"></span></th>
                            <th onclick="sortTable('prediction')">Result <span class="sort-indicator"></span></th>
                            <th onclick="sortTable('confidence')">Confidence <span class="sort-indicator"></span></th>
                            <th onclick="sortTable('timestamp')">Date <span class="sort-indicator"></span></th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="historyTableBody">
                        <!-- Rows will be populated here -->
                    </tbody>
                </table>

                <!-- Empty State -->
                <div class="empty-state" id="historyEmptyState" style="display: none;">
                    <div class="empty-icon">üìÇ</div>
                    <h3>No History Found</h3>
                    <p>Your recent analysis results will appear here.</p>
                    <a href="analysis.html" class="btn-mini-corner">
                        <i class="fas fa-plus"></i> New Analysis
                    </a>
                </div>

                <!-- No Results State -->
                <div class="empty-state" id="noResultsState" style="display: none;">
                    <div class="empty-icon">üîç</div>
                    <h3>No Results Found</h3>
                    <p>Try adjusting your search or filter criteria.</p>
                </div>
            </div>
        </div>
    </main>

    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://unpkg.com/@studio-freight/lenis@1.0.42/dist/lenis.min.js"></script>
    <script src="motion.js"></script>
    <script src="script.js"></script>
    <script>
        // Simple script to handle active state or mock history if we wanted to
        document.addEventListener('DOMContentLoaded', () => {
            // We can add mock history here later if requested
        });
    </script>
</body>

</html>